2. âœ“ How to Run the Pipeline on a New Chapter
The pipeline script is: run_enhanced_pipeline.py Basic Usage:
python scripts/run_enhanced_pipeline.py PSALM_NUMBER
Examples:
# Generate complete commentary for Psalm 23
python scripts/run_enhanced_pipeline.py 23

# just the print ready compiler
python scripts/run_formatter.py 145

# just the word output
python scripts/run_enhanced_pipeline.py 1 --skip-macro --skip-micro --skip-synthesis --skip-master-edit --skip-print-ready

#special commands
--skip_default_commentaries (this will ensure that only traditional commentaries requested by the Micro agent are requested)
--skip-macro 
--skip-micro 
--skip-synthesis 
--skip-master-edit 
--skip-print-ready
--skip-word-doc

#running Chrome in debug mode (where selenium works)
"C:\Program Files\Google\Chrome\Application\chrome.exe" --remote-debugging-port=9222 --user-data-dir="C:/temp/chrome_debug"

#View the exact bundle passed to commentary agents
python view_research_bundle.py [psalm_number] [--format json|text|both]
RESEARCH_BUNDLE_VIEWING_GUIDE.md - Documentation on bundle structure


#Targeted Re-indexing Script
Created: scripts/reindex_specific_psalms.py
Features: Re-index specific Psalms, ranges, or all 150
Usage examples:
python scripts/reindex_specific_psalms.py 1 145 148
python scripts/reindex_specific_psalms.py --range 1-50
python scripts/reindex_specific_psalms.py --all
python scripts/reindex_specific_psalms.py --stats


# run a smoke test
python scripts/run_enhanced_pipeline.py 1 --smoke-test

# Custom output directory
python scripts/run_enhanced_pipeline.py 51 --output-dir output/psalm_51

# Resume from synthesis step (skip macro and micro)
python scripts/run_enhanced_pipeline.py 1 --skip-macro --skip-micro

# Skip master editing (use existing synthesis)
python scripts/run_enhanced_pipeline.py 2 --skip-master-edit

# Adjust rate limit delay (default is 120 seconds)
python scripts/run_enhanced_pipeline.py 100 --delay 60
What the pipeline does:
STEP 1: Macro Analysis - Structural thesis generation
STEP 2: Micro Analysis - Discovery-driven research with enhanced figurative language search
STEP 3: Synthesis - Introduction + verse-by-verse commentary
STEP 4: Master Editor (GPT-5) - Editorial review and revision to "National Book Award" level
STEP 5: Print-Ready Formatting - Final output with Hebrew/English text and divine names modifications
Output files created (in output/test_psalm_NNN/ by default):
psalm_NNN_macro.json - Structural analysis
psalm_NNN_micro_v2.json - Discovery notes
psalm_NNN_research_v2.md - Research bundle (lexicon, concordance, figurative, commentary)
psalm_NNN_synthesis_intro.md - Introduction (pre-edit)
psalm_NNN_synthesis_verses.md - Verse commentary (pre-edit)
psalm_NNN_assessment.md - Editorial assessment
psalm_NNN_edited_intro.md - Revised introduction
psalm_NNN_edited_verses.md - Revised verses
psalm_NNN_print_ready.md - FINAL OUTPUT for Word
Key features:
Automatic rate limiting (120-second delays between API-heavy steps by default)
Skip flags to resume from any step
All intermediate files saved for review
UTF-8 handling for Hebrew text