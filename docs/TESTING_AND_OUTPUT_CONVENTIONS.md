# Testing and Output Conventions

## Directory Structure

```
Psalms/
├── tests/                     # All test scripts
│   ├── test_macro_analyst.py
│   ├── test_micro_analyst.py
│   └── test_*.py              # Future test files
│
├── output/                    # All generated outputs
│   ├── phase3_test/          # Phase 3 test outputs (Psalm 29)
│   │   ├── psalm_029_macro.json          # MacroAnalysis JSON
│   │   ├── psalm_029_macro.md            # MacroAnalysis markdown
│   │   ├── psalm_029_micro.json          # MicroAnalysis JSON
│   │   ├── psalm_029_micro.md            # MicroAnalysis markdown
│   │   ├── psalm_029_research.md         # Research bundle
│   │   └── psalm_029_research_requests.md # Research requests with reasons
│   │
│   └── production/           # Production runs (future)
│       └── psalm_###_*.{json,md}
│
└── logs/                     # All log files
    ├── macro_analyst_YYYYMMDD_HHMMSS.log
    ├── micro_analyst_YYYYMMDD_HHMMSS.log
    └── *.log                 # Auto-generated log files
```

## File Naming Conventions

### Test Scripts
- Location: `tests/`
- Format: `test_{component_name}.py`
- Examples:
  - `test_macro_analyst.py`
  - `test_micro_analyst.py`
  - `test_synthesis_writer.py`

### Test Outputs
- Location: `output/phase3_test/` (during development)
- Location: `output/production/` (for final runs)
- Format: `psalm_{NNN}_{pass}_{format}.{ext}`
- Examples:
  - `psalm_029_macro.json` - MacroAnalysis structured data
  - `psalm_029_macro.md` - MacroAnalysis human-readable
  - `psalm_029_micro.json` - MicroAnalysis structured data
  - `psalm_029_micro.md` - MicroAnalysis human-readable
  - `psalm_029_research.md` - Research bundle (comprehensive)
  - `psalm_029_research_requests.md` - Research requests with justifications

### Log Files
- Location: `logs/`
- Format: `{agent_name}_YYYYMMDD_HHMMSS.log`
- Auto-generated by agents with timestamps
- Examples:
  - `macro_analyst_20251017_102825.log`
  - `micro_analyst_20251017_110550.log`

## What to Read Where

### For Understanding Agent Work

**MacroAnalysis (Pass 1)**:
- Read: `output/phase3_test/psalm_029_macro.md`
- Contains: Thesis, structure, poetic devices, research questions
- Format: Beautiful markdown for humans

**MicroAnalysis (Pass 2) - Discoveries**:
- Read: `output/phase3_test/psalm_029_micro.md`
- Contains: Verse-by-verse discoveries, observations, curious words
- Format: Readable notes about what's interesting

**Research Requests**:
- Read: `output/phase3_test/psalm_029_research_requests.md`
- Contains: All requests with WHY each was made
- Format: Organized by type (BDB, concordance, figurative, commentary)

**Research Bundle**:
- Read: `output/phase3_test/psalm_029_research.md`
- Contains: Assembled research data (lexicon, concordances, etc.)
- Format: Comprehensive markdown reference

### For Machine Processing

**JSON Files**: `output/phase3_test/psalm_029_*.json`
- Structured data for next agents in pipeline
- Not intended for human reading

## Test Execution Standards

### Running Tests

```bash
# Run from project root
cd /path/to/Psalms

# Activate virtual environment
source venv/Scripts/activate

# Run specific test
python tests/test_macro_analyst.py
python tests/test_micro_analyst.py

# Or use pytest (if configured)
pytest tests/test_macro_analyst.py -v
```

### Test Output

- All test outputs go to `output/phase3_test/`
- Tests should save both `.json` and `.md` formats
- Tests should print summary to console
- Detailed logs go to `logs/`

### Cleanup Policy

**Keep**:
- All `output/phase3_test/*.md` files (human-readable)
- All `output/phase3_test/*.json` files (machine-readable)
- Latest `logs/*.log` files from each agent

**Remove**:
- Loose `.log` files in project root
- Temporary test files
- Old duplicate outputs

## Adding New Test Outputs

When creating a new agent or pass:

1. **Test Script**: Create `tests/test_{agent_name}.py`
2. **Output Files**: Save to `output/phase3_test/psalm_###_{pass}.{json,md}`
3. **Add Documentation**: If new output type, document in this file
4. **Logging**: Use auto-generated log files in `logs/`

## Production Run Structure (Future)

When ready for full 150-psalm production:

```
output/production/
├── psalm_001_macro.json
├── psalm_001_macro.md
├── psalm_001_micro.json
├── psalm_001_micro.md
├── psalm_001_research.md
├── psalm_001_synthesis.md
├── psalm_001_final.md
└── ... (all 150 psalms)
```

## Special Files

### Research Request Documentation
**File**: `psalm_###_research_requests.md`
**Purpose**: Shows WHY each research request was made
**Created by**: MicroAnalyst (Pass 2)
**Audience**: Human review of agent reasoning

This file was added in Phase 3b to provide transparency about the MicroAnalyst's curiosity-driven research strategy.

---

**Last Updated**: 2025-10-17 (Phase 3b)
